<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>RED ROAD</title>
  <style>
    :root{
      --header-h: 88px;       /* 두 줄 헤더 총 높이(대략) */
      --border: #e5e7eb;
      --text: #111827;
    }
    *{ box-sizing: border-box; }
    body{ margin:0; font-family: Arial, sans-serif; color:var(--text); }

    /* ===== 두 줄 헤더 ===== */
    header{
      position: sticky; top:0; z-index:1000;
      background:#fff; 
      border-bottom:1px solid var(--border);
      font-family: "Google Sans", Roboto, "Noto Sans KR", Arial,        sans-serif;
      font-size: 1rem ;
      letter-spacing: 0.00625rem ;
      color: #333;
    }
    .header-inner{
      display:grid;
      grid-template-rows: auto auto; /* 윗줄(로고) / 아랫줄(메뉴들) */
      gap: 6px;
      padding: 10px 24px 12px;
    }

    /* 윗줄: 로고 중앙 정렬 */
    .row-top{
      display:flex; justify-content:center; align-items:center;
    }
    .brand{
      display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--text);
    }
    .brand img{ width:48px; height:48px; }
    .brand span{ font-size:1.35rem; font-weight:800; letter-spacing:.02em; }

    /* 아랫줄: 좌측 메인, 우측 계정 */
    .row-bottom{
      display:grid;
      grid-template-columns: 1fr auto; /* 좌: nav-left, 우: nav-right */
      align-items:center;
    }
    nav{ display:flex; align-items:center; gap:1.4rem; }
    nav a{
      text-decoration:none; color:var(--text);
      padding:6px 0; font-weight:500;
    }
    nav a:hover{ text-decoration:underline; }
    nav a.active{ font-weight:800; text-decoration:underline; }

    .leaflet-control-attribution{
      font-size:8px; color:#666; background:none; box-shadow:none;
    }

    /* 반응형 */
    @media (max-width: 900px){
      .brand span{ display:none; }              /* 좁을 때 텍스트 로고 숨김(선택) */
      .row-bottom{ grid-template-columns: 1fr; }
      .nav-right{ justify-content:flex-start; } /* 로그인도 왼쪽으로 붙임 */
    }
  </style>
  {% block head_extra %}{% endblock %}
</head>
<body>
  <header>
    <div class="header-inner">
      <!-- 윗줄: 중앙 로고 -->
      <div class="row-top">
        <a class="brand" href="/index">
          <img src="{{ url_for('static', filename='img/mainlogo.png') }}" alt="로고">
          <span>TacNav -R</span>
        </a>
      </div>

      <!-- 아랫줄: 왼쪽 메인 메뉴 / 오른쪽 로그인 -->
      <div class="row-bottom">
        <nav class="nav-left">
          <a href="/map_user"
              class="{% if request.path == '/map_user' %}active{% endif %}"
              aria-current="{% if request.path == '/map_user' %}page{% endif %}">추천 경로 안내</a>

          <a href="/map"
            class="{% if request.path == '/map' %}active{% endif %}"
            aria-current="{% if request.path == '/map' %}page{% endif %}">실시간 경로 탐색</a>

          <a href="/index"
            class="{% if request.path == '/' or request.path == '/index' %}active{% endif %}"
            aria-current="{% if request.path == '/' or request.path == '/index' %}page{% endif %}">사용 가이드</a>
        </nav>
      <nav class="nav-right">
        {% if session.user %}
          <span style="font-size: small;">{{ session.user.user_id }}님</span>

          <a href="{{ url_for('mypage') }}"
             class="{% if request.path == '/mypage' %}active{% endif %}"
             style="font-size: small;">마이페이지</a>
          
          <form action="{{ url_for('logout') }}" method="post" style="margin:0;">
            <button type="submit"
                    style="background:none;border:none;padding:0;cursor:pointer;font:inherit;font-size:small;color:var(--text);">
              로그아웃
            </button>
          </form>

        {% else %}
          <a href="{{ url_for('home_page') }}" style="font-size: small;">로그인</a>
        {% endif %}
      </nav>
    </div>
  </div>
</header>

  <main>
    {% block content %}{% endblock %}
  </main>
</body>
</html>